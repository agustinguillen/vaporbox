<app-navbar></app-navbar>
<div class="row mt-5">
    <div class="mb-2 profile-container" *ngIf="user">
        <div class="user-image">
            <img src="{{ url + 'get-image-user/' + user.image }}" alt="Foto de perfil" *ngIf="user.image"/>
            <img class="default-image-user" src="assets/img/default-user.jpg" alt="Foto de perfil" *ngIf="!user.image"/>
        </div>
        <div class="mb-2 mt-3">
            <h3 class="text-center section-title">{{user.name + ' ' + user.surname}}</h3>
        </div>
        <div class="d-flex">
            <h5>{{'@'+user.nick}}</h5>
            <div class="follow">
                <div class="label label-default" *ngIf="followed">
                    <small>
                        Te sigue
                    </small>
                </div>
            </div>
        </div>
        <button class="btn btn-default" *ngIf="!following" (click)="followUser(user._id)"><i class="fa fa-user-plus"></i>Seguir</button>
        <button class="btn btn-primary" 
            *ngIf="following" 
            (click)="unfollowUser(user._id)"
            (mouseenter)="mouseEnter(user._id)"
            (mouseleave)="mouseLeave()">
                <span *ngIf="user._id == followUserOver; else following">
                    <i class="fa fa-user-times"></i>
                    Dejar de seguir
                </span>
                <ng-template #following>
                    <i class="fa fa-check"></i>
                    Siguiendo
                </ng-template>
        </button>
        <div class="stats d-flex justify-content-around text-center" *ngIf="stats">
            <div class="following-data">
                <a [routerLink]="['/following', user._id, 1]">
                    <span class="label-stats">
                        Siguiendo
                    </span><br>
                    <span class="number-stats">
                        {{ stats.following }}
                    </span>
                </a>
            </div>
            <div class="following-data">
                <a [routerLink]="['/followers', user._id, 1]">
                    <span class="label-stats">
                        Seguidores
                    </span><br>
                    <span class="number-stats">
                        {{ stats.followed }}
                    </span>
                </a>
            </div>
            <div class="following-data following-data-publications">
                <a href="#">
                        <span class="label-stats">
                            Publicaciones
                        </span><br>
                        <span class="number-stats" *ngIf="stats.publications">
                            {{ stats.publications }}
                        </span>
                        <span class="number-stats" *ngIf="!stats.publications">
                            0
                        </span>
                </a>
            </div>
        </div>
    </div>
    <div class="col-xl-12 col-lg-12" *ngIf="user">
        <app-publications [user]="user._id"></app-publications>
    </div>
</div>