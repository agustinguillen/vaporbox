<app-navbar></app-navbar>
<div class="row mt-5">
    <div class="mb-5 form-container">
        <h3 class="mb-3 text-center section-title">Editar perfil</h3>


        <div class="alert alert-success" *ngIf="status == 'success'">
            Los cambios se han guardado correctamente.
        </div>
        <div class="alert alert-danger" *ngIf="status == 'error'">
            No se han podido guardar los cambios, intentalo nuevamente.
        </div>


        <form #editUserForm="ngForm" (ngSubmit)="onSubmit()" class="col-xl-4 col-lg-4">
            <div class="col-lg-12 mt-3">
                <label for="name">Nombre</label>
                <input type="text" name="name" #name="ngModel" [(ngModel)]="user.name" class="form-control" required/>
                <span *ngIf="!name.value && name.touched">El nombre es obligatorio</span>
            </div>
            <div class="col-lg-12 mt-3">
                <label for="surname">Apellido</label>
                <input type="text" name="surname" #surname="ngModel" [(ngModel)]="user.surname" class="form-control" required/>
                <span *ngIf="!surname.value && surname.touched">El apellido es obligatorio</span>
            </div>
            <div class="col-lg-12 mt-3">
                <label for="nick">Nombre de usuario</label>
                <input type="text" name="nick" #nick="ngModel" [(ngModel)]="user.nick" class="form-control" required/>
                <span *ngIf="!nick.value && nick.touched">El nombre de usuario es obligatorio</span>
            </div>
            <div class="col-lg-12 mt-3">
                <label for="email">Correo electr칩nico</label>
                <input type="text" name="email" #email="ngModel" [(ngModel)]="user.email" class="form-control" required pattern="[a-z0-9-_%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$"/>
                <span *ngIf="!email.value && email.touched">La direcci칩n de correo electr칩nico es obligatoria</span>
            </div>

            <div class="col-lg-12 mt-3">
                <label for="photo">Foto de perfil</label>
                <input #fileInput type="file" placeholder="Subir im치gen" class="form-control" (change)="fileChangeEvent($event)"/>
            </div>

            <div *ngIf="user.image" class="text-center mt-3">
                <img src="{{ url + 'get-image-user/' + user.image}}" alt="Imagen de usuario cargada" class="loaded-img"/><br>
            </div>

            <div class="text-center">
                <button type="submit" class="btn btn-default mt-3" [disabled]="!editUserForm.form.valid">Guardar cambios</button>
            </div>
        </form>
    </div>
</div>

